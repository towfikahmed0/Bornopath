<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install Bornopath</title>
    <meta name="theme-color" content="#159895">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" href="/icons/icon-192.png">
    
    <!-- Load Inter font and Tailwind CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Configure Tailwind to use the specified theme color and font -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        // Custom color based on the original theme
                        'bornopath-teal': '#159895',
                        'bornopath-teal-dark': '#127a77',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>

    <style>
        /* Ensuring the body fills the viewport without overflow issues on mobile */
        body {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f9fdfd;
        }

        /* Custom icon/font-awesome replacement (using inline SVG) */
        .icon-download {
            width: 1em;
            height: 1em;
            display: inline-block;
            vertical-align: middle;
            fill: none;
            stroke: currentColor;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
    </style>
</head>
<body class="p-4">

    <!-- Installation Card -->
    <div class="bg-white p-8 sm:p-10 rounded-xl shadow-2xl max-w-sm w-full text-center transition-all duration-300">
        <!-- Logo (Centered) -->
        <img 
            src="/icons/icon-192.png" 
            alt="Bornopath Logo" 
            width="80" 
            height="80"
            class="mx-auto mb-6 rounded-full shadow-md"
            onerror="this.onerror=null; this.src='https://placehold.co/80x80/159895/ffffff?text=B'"
        >

        <!-- Title -->
        <h1 class="text-3xl font-bold mb-2 text-gray-800">
            Install <span class="text-bornopath-teal">Bornopath</span>
        </h1>

        <!-- Description -->
        <p class="text-gray-500 mb-6 text-base">
            Add Bornopath to your home screen for quick access and an immersive app experience.
        </p>
        
        <!-- Install Button -->
        <button id="installBtn" 
                class="btn-install w-full flex items-center justify-center space-x-2 
                       bg-bornopath-teal text-white font-semibold py-3 px-6 
                       rounded-full shadow-lg transition duration-200 
                       hover:bg-bornopath-teal-dark hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-bornopath-teal/50"
                style="display: none;">
            
            <!-- Inline Download Icon (Replaces Font Awesome) -->
            <svg class="icon-download text-lg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span>Install Bornopath</span>
        </button>
    </div>

    <script>
document.addEventListener("DOMContentLoaded", () => {
    let deferredPrompt;
    const installBtn = document.getElementById("installBtn");

    // ‚úÖ App install ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶≤‡ßá ‡¶∏‡ßç‡¶ü‡ßá‡¶ü ‡¶Ü‡¶™‡¶°‡ßá‡¶ü + ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü
    const setInstalledState = () => {
        installBtn.textContent = "App Installed";
        installBtn.disabled = true;
        installBtn.classList.remove('bg-bornopath-teal', 'hover:bg-bornopath-teal-dark');
        installBtn.classList.add('bg-green-600', 'cursor-default');
        installBtn.style.pointerEvents = 'none';
        window.location.replace("index.html"); // üîπ ‡¶∞‡¶ø‡¶°‡¶æ‡¶á‡¶∞‡ßá‡¶ï‡ßç‡¶ü
    };

    // ‚úÖ Install Prompt ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü
    window.addEventListener("beforeinstallprompt", (e) => {
        e.preventDefault();
        deferredPrompt = e;
        installBtn.style.display = "flex";
        installBtn.innerHTML = `
            <svg class="icon-download text-lg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            <span>Install Bornopath</span>
        `;
    });

    // ‚úÖ Install button ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï
    installBtn.addEventListener("click", async () => {
        if (deferredPrompt) {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            if (outcome === "accepted") {
                setInstalledState();
            }
            deferredPrompt = null;
        }
    });

    // ‚úÖ App install ‡¶π‡ßü‡ßá ‡¶ó‡ßá‡¶≤‡ßá
    window.addEventListener("appinstalled", () => {
        setInstalledState();
        console.log("Bornopath PWA was installed successfully.");
    });

    // ‚úÖ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßã ‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá‡¶á standalone (‡¶Æ‡¶æ‡¶®‡ßá PWA mode ‡¶è) ‡¶ö‡¶≤‡¶õ‡ßá ‡¶ï‡¶ø‡¶®‡¶æ
    if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
        window.location.replace("index.html");
    }
});

    </script>
</body>
</html>
